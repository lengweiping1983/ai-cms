/**
 * videojs-playlist-ui
 * @version 3.4.0
 * @copyright 2018 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsPlaylistUi=t(e.videojs)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;var t,i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={},l=(Object.freeze||Object)({"default":n}),s=l&&n||l,a=void 0!==i?i:"undefined"!=typeof window?window:{};"undefined"!=typeof document?t=document:(t=a["__GLOBAL_DOCUMENT_CACHE@4"])||(t=a["__GLOBAL_DOCUMENT_CACHE@4"]=s);var r,o=t,p=(function(){function e(e){this.value=e}function t(t){var i,n;function l(i,n){try{var a=t[i](n),r=a.value;r instanceof e?Promise.resolve(r.value).then(function(e){l("next",e)},function(e){l("throw",e)}):s(a.done?"return":"normal",a.value)}catch(o){s("throw",o)}}function s(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?l(i.key,i.arg):n=null}this._invoke=function(e,t){return new Promise(function(s,a){var r={key:e,arg:t,resolve:s,reject:a,next:null};n?n=n.next=r:(i=n=r,l(e,t))})},"function"!=typeof t["return"]&&(this["return"]=undefined)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype["throw"]=function(e){return this._invoke("throw",e)},t.prototype["return"]=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},d=e.dom||e,h=e.registerPlugin||e.plugin,y={className:"vjs-playlist",playOnSelect:!1,supportsCssPointerEvents:((r=o.createElement("x")).style.cssText="pointer-events:auto","auto"===r.style.pointerEvents)},f=function(e){e.addClass("vjs-selected")},m=function(e){e.removeClass("vjs-selected"),e.thumbnail&&d.removeClass(e.thumbnail,"vjs-playlist-now-playing")},v=function(e){e.removeClass("vjs-up-next")},w=e.getComponent("Component"),C=function(t){function i(e,n,l){if(p(this,i),!n.item)throw new Error("Cannot construct a PlaylistMenuItem without an item option");var s=c(this,t.call(this,e,n));return s.item=n.item,s.playOnSelect=l.playOnSelect,s.emitTapEvents(),s.on(["click","tap"],s.switchPlaylistItem_),s.on("keydown",s.handleKeyDown_),s}return u(i,t),i.prototype.handleKeyDown_=function(e){13!==e.which&&32!==e.which||this.switchPlaylistItem_()},i.prototype.switchPlaylistItem_=function(e){this.player_.playlist.currentItem(function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}(this.player_.playlist(),this.item)),this.playOnSelect&&this.player_.play()},i.prototype.createEl=function(){var t=o.createElement("li"),i=this.options_.item;if(t.className="vjs-playlist-item",t.setAttribute("tabIndex",0),this.thumbnail=function(e){if(!e){var t=o.createElement("div");return t.className="vjs-playlist-thumbnail vjs-playlist-thumbnail-placeholder",t}var i=o.createElement("picture");if(i.className="vjs-playlist-thumbnail","string"==typeof e){var n=o.createElement("img");n.src=e,n.alt="",i.appendChild(n)}else{for(var l=0;l<e.length-1;l++){var s=e[l],a=o.createElement("source");for(var r in s)a[r]=s[r];i.appendChild(a)}var p=e[e.length-1],u=o.createElement("img");u.alt="";for(var c in p)u[c]=p[c];i.appendChild(u)}return i}(i.thumbnail),t.appendChild(this.thumbnail),i.duration){var n=o.createElement("time"),l=e.formatTime(i.duration);n.className="vjs-playlist-duration",n.setAttribute("datetime","PT0H0M"+i.duration+"S"),n.appendChild(o.createTextNode(l)),t.appendChild(n)}var s=o.createElement("span"),a=this.localize("Now Playing");s.className="vjs-playlist-now-playing-text",s.appendChild(o.createTextNode(a)),s.setAttribute("title",a),this.thumbnail.appendChild(s);var r=o.createElement("div");r.className="vjs-playlist-title-container",this.thumbnail.appendChild(r);var p=o.createElement("span"),u=this.localize("Up Next");p.className="vjs-up-next-text",p.appendChild(o.createTextNode(u)),p.setAttribute("title",u),r.appendChild(p);var c=o.createElement("cite"),d=i.name||this.localize("Untitled Video");return c.className="vjs-playlist-name",c.appendChild(o.createTextNode(d)),c.setAttribute("title",d),r.appendChild(c),t},i}(w),j=function(t){function i(n,l){if(p(this,i),!n.playlist)throw new Error("videojs-playlist is required for the playlist component");var s=c(this,t.call(this,n,l));return s.items=[],l.horizontal?s.addClass("vjs-playlist-horizontal"):s.addClass("vjs-playlist-vertical"),l.supportsCssPointerEvents&&s.addClass("vjs-csspointerevents"),s.createPlaylist_(),e.browser.TOUCH_ENABLED||s.addClass("vjs-mouse"),n.on(["loadstart","playlistchange","playlistsorted"],function(e){s.update()}),n.on("adstart",function(){s.addClass("vjs-ad-playing")}),n.on("adend",function(){s.removeClass("vjs-ad-playing")}),s}return u(i,t),i.prototype.createEl=function(){return d.createEl("div",{className:this.options_.className})},i.prototype.createPlaylist_=function(){var e=this.player_.playlist()||[],t=this.el_.querySelector(".vjs-playlist-item-list"),i=this.el_.querySelector(".vjs-playlist-ad-overlay");t||((t=o.createElement("ol")).className="vjs-playlist-item-list",this.el_.appendChild(t));for(var n=0;n<this.items.length;n++)t.removeChild(this.items[n].el_);this.items.length=0;for(var l=0;l<e.length;l++){var s=new C(this.player_,{item:e[l]},this.options_);this.items.push(s),t.appendChild(s.el_)}i?t.appendChild(i):((i=o.createElement("li")).className="vjs-playlist-ad-overlay",t.appendChild(i));var a=this.player_.playlist.currentItem();if(this.items.length&&a>=0){f(this.items[a]);var r=this.items[a].$(".vjs-playlist-thumbnail");r&&d.addClass(r,"vjs-playlist-now-playing")}},i.prototype.update=function(){var e=this.player_.playlist();if(this.items.length===e.length){for(var t=0;t<this.items.length;t++)if(this.items[t].item!==e[t])return void this.createPlaylist_();for(var i=this.player_.playlist.currentItem(),n=0;n<this.items.length;n++){var l=this.items[n];n===i?(f(l),o.activeElement!==l.el()&&d.addClass(l.thumbnail,"vjs-playlist-now-playing"),v(l)):n===i+1?(m(l),l.addClass("vjs-up-next")):(m(l),v(l))}}else this.createPlaylist_()},i}(w),b=function(e){for(var t=0;t<e.childNodes.length;t++)if(d.isEl(e.childNodes[t]))return!0;return!1},_=function(t){if(!this.playlist)throw new Error("videojs-playlist plugin is required by the videojs-playlist-ui plugin");if(d.isEl(t)&&(e.log.warn('videojs-playlist-ui: Passing an element directly to playlistUi() is deprecated, use the "el" option instead!'),t={el:t}),t=e.mergeOptions(y,t),this.playlistMenu){var i=this.playlistMenu.el();if(i){var n=i.parentNode,l=i.nextSibling;this.playlistMenu.dispose(),d.emptyEl(i),l?n.insertBefore(i,l):n.appendChild(i),t.el=i}}d.isEl(t.el)||(t.el=function(e){for(var t=o.querySelectorAll("."+e),i=void 0,n=0;n<t.length;n++)if(!b(t[n])){i=t[n];break}return i}(t.className)),this.playlistMenu=new j(this,t)};return e.registerComponent("PlaylistMenu",j),e.registerComponent("PlaylistMenuItem",C),h("playlistUi",_),_.VERSION="3.4.0",_});